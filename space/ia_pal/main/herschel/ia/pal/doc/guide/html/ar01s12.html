<html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>12.&nbsp;Querying for products</title><link href="../../css/common.css" rel="stylesheet" type="text/css"><meta content="DocBook XSL Stylesheets V1.68.1" name="generator"><link rel="start" href="pal-guide.html" title="Product Access Layer Developers Guide"><link rel="up" href="pal-guide.html" title="Product Access Layer Developers Guide"><link rel="prev" href="ar01s11.html" title="11.&nbsp;Pool locking mechanism"><link rel="next" href="ar01s13.html" title="13.&nbsp;Storage and PoolManagers"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table summary="Navigation header" width="100%"><tr><th align="center" colspan="3">12.&nbsp;Querying for products</th></tr><tr><td align="left" width="20%"><a accesskey="p" href="ar01s11.html">Prev</a>&nbsp;</td><th align="center" width="60%">&nbsp;</th><td align="right" width="20%">&nbsp;<a accesskey="n" href="ar01s13.html">Next</a></td></tr></table><hr></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="query"></a>12.&nbsp;Querying for products</h2></div></div></div><p>As mentioned earlier, it is possible to query for products.
Queries are possible through one of three types of query classes:
The AttribQuery, the MetaQuery and the FullQuery.
</p><p>
The AttributeQuery is a query mechanism that allows the user/developer to query the metadata that is defined for all products, such as: creator, creationDate, startDate, endDate, instrument, modelName.
This follows the syntax <pre class="screen">
AttribQuery aq = new AttribQuery(Product.class, "p", "p.creator == 'me'");
</pre>
This queries the products for any with the value of the attribute that is equal to 'me'. The query is used via the following syntax and returns a Set ;
<pre class="screen">
AttribQuery aq = new AttribQuery(Product.class, "p", "p.creator == 'me'");
Set&lt;ProductRef&gt; results = storage.select(aq);
</pre>
</p><p>
The MetaQuery allows for a search on any Metadata, including those which are specified for only some classes of product. This follows the syntax 
<pre class="screen">
MetaQuery mq = new MetaQuery(Product.class, "p", "p.meta.containsKey('flag') and p.meta['flag'].value == 'up'");
Set&lt;ProductRef&gt; results = storage.select(mq);
</pre>
Again, this returns a Set of the ProductRefs containg the value 'up' for the MetaData 'flag'.

</p><p>
The FullQuery allows for a search of the data in the products, 
and can make use of numeric functions that are defined in the basic numeric toolbox, as in this example:
<pre class="screen">
FullQuery fq = new FullQuery(Product.class, "p", "ANY(p['table']['Numbers'].data &lt; 50.0)");
Set&lt;ProductRef&gt; results = storage.select(mq);
</pre>
</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="enhanced-query"></a>12.1.&nbsp;Enhanced Query API</h3></div></div></div><p>
From DP-11/2 onwards, there is a new enhanced Query API provided in parallel with the above query support.
Documentation for that is available under the <a href="http://www.rssd.esa.int/SD-general/Projects/Herschel/hscdt/releases/doc/api/herschel/ia/pal/query/package-summary.html#package_description" target="_top">javadoc</a> for the herschel.ia.pal.query package.
</p></div></div><div class="navfooter"><hr><table summary="Navigation footer" width="100%"><tr><td align="left" width="40%"><a accesskey="p" href="ar01s11.html">Prev</a>&nbsp;</td><td align="center" width="20%">&nbsp;</td><td align="right" width="40%">&nbsp;<a accesskey="n" href="ar01s13.html">Next</a></td></tr><tr><td valign="top" align="left" width="40%">11.&nbsp;Pool locking mechanism&nbsp;</td><td align="center" width="20%"><a accesskey="h" href="pal-guide.html">Home</a></td><td valign="top" align="right" width="40%">&nbsp;13.&nbsp;Storage and PoolManagers</td></tr></table></div></body></html>